"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var Valval=function(){function Valval(){_classCallCheck(this,Valval),this.options={},this.regexp_message="",this.regexp_message_only_rus="",this.regexp_message_only_en="",this.regexp_password="",this.regexp_password_only_rus="",this.regexp_password_only_numbers="",this.regexp_password_only_en="",this.regexp_mail="",this.regexp_date="",this.regexp_tel="",this.regexp_required="",this.regexp_repeat_password="",this.regexp_date_only_slash="",this.regexp_date_only_dot="",this.regexp_date_only_hyphen="",this.regexp_first_name="",this.regexp_first_name_only_en="",this.regexp_first_name_only_rus="",this.regexp_last_name="",this.regexp_last_name_only_en="",this.regexp_last_name_only_rus="",this.invalidSize=0}return _createClass(Valval,[{key:"getOptions",value:function(){return this.options}},{key:"submitForm",value:function(t){var e=this,i=t.form;i.addEventListener("submit",function(n){t.preventDefault&&n.preventDefault(),e.invalidSize?t.required&&e.checkRequired(t):i.submit()})}},{key:"checkRequired",value:function(t){this.regexp_required.test(t.element.value)||(t.valid=!1,this.checkValid(t),this.checkValidationElement(t),this.invalidSize=this.addInvalidElementsInArray(t))}},{key:"addInvalidElementsInArray",value:function(t){var e=new Set;for(var i in t.objOptions)!t.objOptions[i].valid&&e.add(t.objOptions[i]);return e.size}},{key:"checkValidationElement",value:function(t){if(t.validationElement&&t.validationElement.have){var e=document.querySelector(t.validationElement.selectorEl);t.valid?(e.innerText=t.validationElement.textWhenValid,e.classList.add(t.validationElement.classValid||"valval-valid-el"),e.classList.remove(t.validationElement.classInvalid||"valval-invalid-el")):(e.innerText=t.validationElement.textWhenInvalid,e.classList.remove(t.validationElement.classValid||"valval-valid-el"),e.classList.add(t.validationElement.classInvalid||"valval-invalid-el"))}}},{key:"validationElement",value:function(t,e,i){(t=t||/^''$/).test(e)?(i.valid=!0,this.checkValid(i),this.checkValidationElement(i),this.invalidSize=this.addInvalidElementsInArray(i)):(i.valid=!1,this.checkValid(i),this.checkValidationElement(i),this.invalidSize=this.addInvalidElementsInArray(i))}},{key:"checkValid",value:function(t){t.valid?(t.element.classList.add(t.classValid),t.element.classList.remove(t.classInvalid)):(t.element.classList.remove(t.classValid),t.element.classList.add(t.classInvalid))}},{key:"getRegularExpressions",value:function getRegularExpressions(options){for(var item in options)options[item].password&&(this.regexp_password=eval("/^.{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),this.regexp_password_only_rus=eval("/^[А-Я|а-я]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),this.regexp_password_only_numbers=eval("/^\\d{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),this.regexp_password_only_en=eval("/^[A-Z|a-z]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/"))),options[item].mail&&(this.regexp_mail=/^[A-Z|a-z|\d|\_|\-|\.]{1,}@[A-Z|a-z]{1,}\.[A-Z|a-z]{1,}$/),options[item].date&&(this.regexp_date=/^(\d{2,2}[\/|\.|\-]){2,2}\d{4,4}$/,this.regexp_date_only_slash=/^(\d{2,2}\/){2,2}\d{4,4}$/,this.regexp_date_only_dot=/^(\d{2,2}\.){2,2}\d{4,4}$/,this.regexp_date_only_hyphen=/^(\d{2,2}\-){2,2}\d{4,4}$/),options[item].tel&&(this.regexp_tel=eval("/^\\d{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/"))),options[item].firstName&&(this.regexp_first_name=eval("/^[a-z|A-Z|а-я|А-Я]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),this.regexp_first_name_only_rus=eval("/^[А-Я|а-я]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),this.regexp_first_name_only_en=eval("/^[A-Z|a-z]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/"))),options[item].lastName&&(this.regexp_last_name=eval("/^[a-z|A-Z|а-я|А-Я]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),this.regexp_last_name_only_rus=eval("/^[А-Я|а-я]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),this.regexp_last_name_only_en=eval("/^[A-Z|a-z]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/"))),options[item].message,this.regexp_required=/.{1,}/}},{key:"getDefaultParams",value:function(t){for(var e in t)t[e].preventDefault=!0,t[e].element=document.querySelector('[data-valval="'.concat(e,'"]')),t[e].form=t[e].element.form,t[e].elementsInForm=_toConsumableArray(t[e].element.form.elements).filter(function(t){return"submit"!==t.type}),t[e].submit=_toConsumableArray(t[e].element.form.elements).find(function(t){return"submit"===t.type}),t[e].objOptions=t,t[e].classInvalid=t[e].classInvalid?t[e].classInvalid:"valval-invalid",t[e].classValid=t[e].classValid?t[e].classValid:"valval-valid",t[e].valid=!t[e].required,t[e].required=!!t[e].required&&t[e].required,t[e].date||t[e].mail||t[e].repeatPassword||(t[e].minLength=t[e].minLength?t[e].minLength:1,t[e].maxLength=t[e].maxLength?t[e].maxLength:"")}},{key:"getSizeOptions",value:function(t){for(var e in t){var i=new Set;for(var n in t[e].objOptions)i.add(n);this.invalidSize=i.size}}},{key:"start",value:function start(options){var _this2=this;if("object"===_typeof(options)){this.getDefaultParams(options),this.getSizeOptions(options),this.getRegularExpressions(options),this.options=options;var _loop=function _loop(item){options[item].element.addEventListener("input",function(){var value=options[item].element.value;if(!options[item].password||options[item].onlyRus||options[item].onlyNumbers||options[item].onlyEn||_this2.validationElement(_this2.regexp_password,value,options[item]),options[item].password&&options[item].onlyRus&&_this2.validationElement(_this2.regexp_password_only_rus,value,options[item]),options[item].password&&options[item].onlyNumbers&&_this2.validationElement(_this2.regexp_password_only_numbers,value,options[item]),options[item].password&&options[item].onlyEn&&_this2.validationElement(_this2.regexp_password_only_en,value,options[item]),options[item].mail&&_this2.validationElement(_this2.regexp_mail,value,options[item]),!options[item].date||options[item].onlySlash||options[item].onlyDot||options[item].onlyHyphen||_this2.validationElement(_this2.regexp_date,value,options[item]),options[item].date&&options[item].onlySlash&&_this2.validationElement(_this2.regexp_date_only_slash,value,options[item]),options[item].date&&options[item].onlyDot&&_this2.validationElement(_this2.regexp_date_only_dot,value,options[item]),options[item].date&&options[item].onlyHyphen&&_this2.validationElement(_this2.regexp_date_only_hyphen,value,options[item]),options[item].tel&&_this2.validationElement(_this2.regexp_tel,value,options[item]),options[item].message&&options[item].onlyEn&&_this2.validationElement(_this2.regexp_message_only_en,value,options[item]),options[item].message&&options[item].onlyRus&&_this2.validationElement(_this2.regexp_message_only_rus,value,options[item]),options[item].repeatPassword)for(var i in options[item].objOptions)i===options[item].repeatAt&&(options[item].objOptions[i].element.value?(_this2.regexp_repeat_password=eval("/^".concat(options[item].objOptions[i].element.value,"$/")),_this2.validationElement(_this2.regexp_repeat_password,value,options[item])):(options[item].valid=!1,_this2.checkValid(options[item]),_this2.checkValidationElement(options[item]),_this2.invalidSize=_this2.addInvalidElementsInArray(options[item]),options[item].objOptions[i].valid=!1,_this2.checkValid(options[item].objOptions[i]),_this2.checkValidationElement(options[item].objOptions[i]),_this2.invalidSize=_this2.addInvalidElementsInArray(options[item].objOptions[i])));!options[item].firstName||options[item].onlyRus||options[item].onlyEn||options[item].bigFirstSymbol||_this2.validationElement(_this2.regexp_first_name,value,options[item]),options[item].firstName&&options[item].bigFirstSymbol&&(_this2.regexp_first_name=eval("/^[A-Z|А-Я]{1,1}[a-z|а-я]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),_this2.validationElement(_this2.regexp_first_name,value,options[item])),options[item].firstName&&options[item].onlyEn&&(_this2.regexp_first_name_only_en=eval("/^[a-z]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),_this2.validationElement(_this2.regexp_first_name_only_en,value,options[item])),options[item].firstName&&options[item].onlyEn&&options[item].bigFirstSymbol&&(_this2.regexp_first_name_only_en=eval("/^[A-Z]{1,1}[a-z]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),_this2.validationElement(_this2.regexp_first_name_only_en,value,options[item])),options[item].firstName&&options[item].onlyRus&&(_this2.regexp_first_name_only_rus=eval("/^[а-я]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),_this2.validationElement(_this2.regexp_first_name_only_rus,value,options[item])),options[item].firstName&&options[item].onlyRus&&options[item].bigFirstSymbol&&(_this2.regexp_first_name_only_rus=eval("/^[А-Я]{1,1}[а-я]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),_this2.validationElement(_this2.regexp_first_name_only_rus,value,options[item])),!options[item].lastName||options[item].onlyRus||options[item].onlyEn||_this2.validationElement(_this2.regexp_last_name,value,options[item]),options[item].lastName&&options[item].bigFirstSymbol&&(_this2.regexp_last_name=eval("/^[A-Z|А-Я]{1,1}[a-z|а-я]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),_this2.validationElement(_this2.regexp_last_name,value,options[item])),options[item].lastName&&options[item].onlyEn&&(_this2.regexp_last_name_only_en=eval("/^[a-z]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),_this2.validationElement(_this2.regexp_last_name_only_en,value,options[item])),options[item].lastName&&options[item].onlyEn&&options[item].bigFirstSymbol&&(_this2.regexp_last_name_only_en=eval("/^[A-Z]{1,1}[a-z]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),_this2.validationElement(_this2.regexp_last_name_only_en,value,options[item])),options[item].lastName&&options[item].onlyRus&&(_this2.regexp_last_name_only_rus=eval("/^[а-я]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),_this2.validationElement(_this2.regexp_last_name_only_rus,value,options[item])),options[item].lastName&&options[item].onlyRus&&options[item].bigFirstSymbol&&(_this2.regexp_last_name_only_rus=eval("/^[А-Я]{1,1}[а-я]{".concat(options[item].minLength,",").concat(options[item].maxLength,"}$/")),_this2.validationElement(_this2.regexp_last_name_only_rus,value,options[item])),options[item].message&&(options[item].maxLength?value.length<=options[item].maxLength&&value.length>=options[item].minLength?(options[item].valid=!0,_this2.checkValid(options[item]),_this2.checkValidationElement(options[item]),_this2.invalidSize=_this2.addInvalidElementsInArray(options[item])):(options[item].valid=!1,_this2.checkValid(options[item]),_this2.checkValidationElement(options[item]),_this2.invalidSize=_this2.addInvalidElementsInArray(options[item])):value.length>=options[item].minLength?(options[item].valid=!0,_this2.checkValid(options[item]),_this2.checkValidationElement(options[item]),_this2.invalidSize=_this2.addInvalidElementsInArray(options[item])):(options[item].valid=!1,_this2.checkValid(options[item]),_this2.checkValidationElement(options[item]),_this2.invalidSize=_this2.addInvalidElementsInArray(options[item])))});var _loop2=function _loop2(i){i===options[item].repeatAt&&options[item].objOptions[i].element.addEventListener("input",function(){options[item].objOptions[i].element.value?options[item].repeatPassword&&(_this2.regexp_repeat_password=eval("/^".concat(options[item].objOptions[i].element.value,"$/")),_this2.validationElement(_this2.regexp_repeat_password,options[item].element.value,options[item])):(options[item].repeatPassword&&(options[item].valid=!1,_this2.checkValid(options[item]),_this2.checkValidationElement(options[item]),_this2.invalidSize=_this2.addInvalidElementsInArray(options[item])),options[item].objOptions[i].valid=!1,_this2.checkValid(options[item].objOptions[i]),_this2.checkValidationElement(options[item].objOptions[i]),_this2.invalidSize=_this2.addInvalidElementsInArray(options[item].objOptions[i]))})};for(var i in options[item].objOptions)_loop2(i);_this2.submitForm(options[item])};for(var item in options)_loop(item)}return this}}]),Valval}();module.exports.Valval=Valval;